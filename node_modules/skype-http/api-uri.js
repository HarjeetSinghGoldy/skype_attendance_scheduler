"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
}
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = __importDefault(require("path"));
const url_1 = __importDefault(require("url"));
const consts_1 = require("./consts");
exports.DEFAULT_USER = "self";
function joinPath(parts) {
    return path_1.default.posix.join.apply(null, parts);
}
// The following functions build an array of parts to build the path
// /users
function buildUsers() {
    return ["users"];
}
function buildBatch() {
    return buildUsers().concat("batch");
}
// /users/:user
function buildUser(username) {
    return buildUsers().concat(username);
}
// /users/:user/contacts
function buildContacts(username) {
    return buildUser(username).concat("contacts");
}
// /users/:user/contacts/auth-request/:contact
function buildAuthRequest(username, contact) {
    return buildContacts(username).concat("auth-request", contact);
}
// /users/:user/contacts/auth-request/:contact/accept
function buildAuthRequestAccept(username, contact) {
    return buildAuthRequest(username, contact).concat("accept");
}
// /users/:user/contacts/auth-request/:contact/decline
function buildAuthRequestDecline(username, contact) {
    return buildAuthRequest(username, contact).concat("decline");
}
// /users/:user/displayname
function buildDisplayName(username) {
    return buildUser(username).concat("displayname");
}
// /users/:user/profile
function buildProfile(username) {
    return buildUser(username).concat("profile");
}
// agentProvisioningService: { host: "https://api.aps.skype.com/v1/" },
// stratusService: {
//   avatarUrl: "users/${contactId}/profile/avatar?cacheHeaders=1",
//     avatarUpdateUrl: "users/${contactId}/profile/avatar",
//     blockContactEndpoint: "users/self/contacts/${contactId}/block",
//     contactRequestEndpoint: "users/self/contacts/auth-request",
//     contactRequestTimeInterval: 60000,
//     contactsEndpoint: "users/self/authorized-contacts",
//     directorySearchEndpointSkypeOnly: "search/users/any?keyWord=${keyword}&contactTypes[]=skype",
//     directorySearchEndpoint: "search/users/any?keyWord=${keyword}",
//     directorySearchByIdEndpoint: "search/users?skypename=${skypeName}",
//     firstContactRequestDelay: 10000,
//     host: "https://api.skype.com/",
//     myContactsEndpoint: "users/self/contacts?hideDetails=true",
//     profileEndpoint: "users/self/profile",
//     profilesEndpoint: "users/self/contacts/profiles",
//     batchProfilesEndpoint: "users/batch/profiles",
//     userInfoEndpoint: "users/self",
//     unblockContactEndpoint: "users/self/contacts/${contactId}/unblock",
//     deleteContactEndpoint: "users/self/contacts/${contactId}",
//     retry: n
// },
// /users/:user/profile/avatar?cacheHeaders=1
function buildAvatar(username) {
    return buildProfile(username).concat("avatar?cacheHeaders=1");
}
// /users/:user/profile/avatar
function buildUpdatedAvatar(username) {
    return buildProfile(username).concat("avatar");
}
function buildProfiles() {
    return buildBatch().concat("profiles");
}
function getOrigin() {
    return "https://" + consts_1.SKYPEWEB_API_SKYPE_HOST;
}
function get(p) {
    return url_1.default.resolve(getOrigin(), p);
}
function displayName(username) {
    return get(joinPath(buildDisplayName(username)));
}
exports.displayName = displayName;
function userProfile(user) {
    return get(joinPath(buildProfile(user)));
}
exports.userProfile = userProfile;
function userProfiles() {
    return get(joinPath(buildProfiles()));
}
exports.userProfiles = userProfiles;
function authRequestAccept(username, contact) {
    return get(joinPath(buildAuthRequestAccept(username, contact)));
}
exports.authRequestAccept = authRequestAccept;
function authRequestDecline(username, contact) {
    return get(joinPath(buildAuthRequestDecline(username, contact)));
}
exports.authRequestDecline = authRequestDecline;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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LGdDQUF1QixDQUFDO0FBQzlDLENBQUM7QUFFRCxhQUFhLENBQVM7SUFDcEIsTUFBTSxDQUFDLGFBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDckMsQ0FBQztBQUVELHFCQUE0QixRQUFnQjtJQUMxQyxNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkQsQ0FBQztBQUZELGtDQUVDO0FBRUQscUJBQTRCLElBQVk7SUFDdEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzQyxDQUFDO0FBRkQsa0NBRUM7QUFFRDtJQUNFLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN4QyxDQUFDO0FBRkQsb0NBRUM7QUFFRCwyQkFBa0MsUUFBZ0IsRUFBRSxPQUFlO0lBQ2pFLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLHNCQUFzQixDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEUsQ0FBQztBQUZELDhDQUVDO0FBRUQsNEJBQW1DLFFBQWdCLEVBQUUsT0FBZTtJQUNsRSxNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25FLENBQUM7QUFGRCxnREFFQyIsImZpbGUiOiJhcGktdXJpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB1cmwgZnJvbSBcInVybFwiO1xuaW1wb3J0IHsgU0tZUEVXRUJfQVBJX1NLWVBFX0hPU1QgfSBmcm9tIFwiLi9jb25zdHNcIjtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVVNFUjogc3RyaW5nID0gXCJzZWxmXCI7XG5cbmZ1bmN0aW9uIGpvaW5QYXRoKHBhcnRzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLnBvc2l4LmpvaW4uYXBwbHkobnVsbCwgcGFydHMpO1xufVxuXG4vLyBUaGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBidWlsZCBhbiBhcnJheSBvZiBwYXJ0cyB0byBidWlsZCB0aGUgcGF0aFxuXG4vLyAvdXNlcnNcbmZ1bmN0aW9uIGJ1aWxkVXNlcnMoKTogc3RyaW5nW10ge1xuICByZXR1cm4gW1widXNlcnNcIl07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQmF0Y2goKTogc3RyaW5nW10ge1xuICByZXR1cm4gYnVpbGRVc2VycygpLmNvbmNhdChcImJhdGNoXCIpO1xufVxuXG4vLyAvdXNlcnMvOnVzZXJcbmZ1bmN0aW9uIGJ1aWxkVXNlcih1c2VybmFtZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICByZXR1cm4gYnVpbGRVc2VycygpLmNvbmNhdCh1c2VybmFtZSk7XG59XG5cbi8vIC91c2Vycy86dXNlci9jb250YWN0c1xuZnVuY3Rpb24gYnVpbGRDb250YWN0cyh1c2VybmFtZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICByZXR1cm4gYnVpbGRVc2VyKHVzZXJuYW1lKS5jb25jYXQoXCJjb250YWN0c1wiKTtcbn1cblxuLy8gL3VzZXJzLzp1c2VyL2NvbnRhY3RzL2F1dGgtcmVxdWVzdC86Y29udGFjdFxuZnVuY3Rpb24gYnVpbGRBdXRoUmVxdWVzdCh1c2VybmFtZTogc3RyaW5nLCBjb250YWN0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIHJldHVybiBidWlsZENvbnRhY3RzKHVzZXJuYW1lKS5jb25jYXQoXCJhdXRoLXJlcXVlc3RcIiwgY29udGFjdCk7XG59XG5cbi8vIC91c2Vycy86dXNlci9jb250YWN0cy9hdXRoLXJlcXVlc3QvOmNvbnRhY3QvYWNjZXB0XG5mdW5jdGlvbiBidWlsZEF1dGhSZXF1ZXN0QWNjZXB0KHVzZXJuYW1lOiBzdHJpbmcsIGNvbnRhY3Q6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIGJ1aWxkQXV0aFJlcXVlc3QodXNlcm5hbWUsIGNvbnRhY3QpLmNvbmNhdChcImFjY2VwdFwiKTtcbn1cblxuLy8gL3VzZXJzLzp1c2VyL2NvbnRhY3RzL2F1dGgtcmVxdWVzdC86Y29udGFjdC9kZWNsaW5lXG5mdW5jdGlvbiBidWlsZEF1dGhSZXF1ZXN0RGVjbGluZSh1c2VybmFtZTogc3RyaW5nLCBjb250YWN0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIHJldHVybiBidWlsZEF1dGhSZXF1ZXN0KHVzZXJuYW1lLCBjb250YWN0KS5jb25jYXQoXCJkZWNsaW5lXCIpO1xufVxuXG4vLyAvdXNlcnMvOnVzZXIvZGlzcGxheW5hbWVcbmZ1bmN0aW9uIGJ1aWxkRGlzcGxheU5hbWUodXNlcm5hbWU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIGJ1aWxkVXNlcih1c2VybmFtZSkuY29uY2F0KFwiZGlzcGxheW5hbWVcIik7XG59XG5cbi8vIC91c2Vycy86dXNlci9wcm9maWxlXG5mdW5jdGlvbiBidWlsZFByb2ZpbGUodXNlcm5hbWU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIGJ1aWxkVXNlcih1c2VybmFtZSkuY29uY2F0KFwicHJvZmlsZVwiKTtcbn1cblxuLy8gYWdlbnRQcm92aXNpb25pbmdTZXJ2aWNlOiB7IGhvc3Q6IFwiaHR0cHM6Ly9hcGkuYXBzLnNreXBlLmNvbS92MS9cIiB9LFxuLy8gc3RyYXR1c1NlcnZpY2U6IHtcbi8vICAgYXZhdGFyVXJsOiBcInVzZXJzLyR7Y29udGFjdElkfS9wcm9maWxlL2F2YXRhcj9jYWNoZUhlYWRlcnM9MVwiLFxuLy8gICAgIGF2YXRhclVwZGF0ZVVybDogXCJ1c2Vycy8ke2NvbnRhY3RJZH0vcHJvZmlsZS9hdmF0YXJcIixcbi8vICAgICBibG9ja0NvbnRhY3RFbmRwb2ludDogXCJ1c2Vycy9zZWxmL2NvbnRhY3RzLyR7Y29udGFjdElkfS9ibG9ja1wiLFxuLy8gICAgIGNvbnRhY3RSZXF1ZXN0RW5kcG9pbnQ6IFwidXNlcnMvc2VsZi9jb250YWN0cy9hdXRoLXJlcXVlc3RcIixcbi8vICAgICBjb250YWN0UmVxdWVzdFRpbWVJbnRlcnZhbDogNjAwMDAsXG4vLyAgICAgY29udGFjdHNFbmRwb2ludDogXCJ1c2Vycy9zZWxmL2F1dGhvcml6ZWQtY29udGFjdHNcIixcbi8vICAgICBkaXJlY3RvcnlTZWFyY2hFbmRwb2ludFNreXBlT25seTogXCJzZWFyY2gvdXNlcnMvYW55P2tleVdvcmQ9JHtrZXl3b3JkfSZjb250YWN0VHlwZXNbXT1za3lwZVwiLFxuLy8gICAgIGRpcmVjdG9yeVNlYXJjaEVuZHBvaW50OiBcInNlYXJjaC91c2Vycy9hbnk/a2V5V29yZD0ke2tleXdvcmR9XCIsXG4vLyAgICAgZGlyZWN0b3J5U2VhcmNoQnlJZEVuZHBvaW50OiBcInNlYXJjaC91c2Vycz9za3lwZW5hbWU9JHtza3lwZU5hbWV9XCIsXG4vLyAgICAgZmlyc3RDb250YWN0UmVxdWVzdERlbGF5OiAxMDAwMCxcbi8vICAgICBob3N0OiBcImh0dHBzOi8vYXBpLnNreXBlLmNvbS9cIixcbi8vICAgICBteUNvbnRhY3RzRW5kcG9pbnQ6IFwidXNlcnMvc2VsZi9jb250YWN0cz9oaWRlRGV0YWlscz10cnVlXCIsXG4vLyAgICAgcHJvZmlsZUVuZHBvaW50OiBcInVzZXJzL3NlbGYvcHJvZmlsZVwiLFxuLy8gICAgIHByb2ZpbGVzRW5kcG9pbnQ6IFwidXNlcnMvc2VsZi9jb250YWN0cy9wcm9maWxlc1wiLFxuLy8gICAgIGJhdGNoUHJvZmlsZXNFbmRwb2ludDogXCJ1c2Vycy9iYXRjaC9wcm9maWxlc1wiLFxuLy8gICAgIHVzZXJJbmZvRW5kcG9pbnQ6IFwidXNlcnMvc2VsZlwiLFxuLy8gICAgIHVuYmxvY2tDb250YWN0RW5kcG9pbnQ6IFwidXNlcnMvc2VsZi9jb250YWN0cy8ke2NvbnRhY3RJZH0vdW5ibG9ja1wiLFxuLy8gICAgIGRlbGV0ZUNvbnRhY3RFbmRwb2ludDogXCJ1c2Vycy9zZWxmL2NvbnRhY3RzLyR7Y29udGFjdElkfVwiLFxuLy8gICAgIHJldHJ5OiBuXG4vLyB9LFxuXG4vLyAvdXNlcnMvOnVzZXIvcHJvZmlsZS9hdmF0YXI/Y2FjaGVIZWFkZXJzPTFcbmZ1bmN0aW9uIGJ1aWxkQXZhdGFyKHVzZXJuYW1lOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIHJldHVybiBidWlsZFByb2ZpbGUodXNlcm5hbWUpLmNvbmNhdChcImF2YXRhcj9jYWNoZUhlYWRlcnM9MVwiKTtcbn1cblxuLy8gL3VzZXJzLzp1c2VyL3Byb2ZpbGUvYXZhdGFyXG5mdW5jdGlvbiBidWlsZFVwZGF0ZWRBdmF0YXIodXNlcm5hbWU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIGJ1aWxkUHJvZmlsZSh1c2VybmFtZSkuY29uY2F0KFwiYXZhdGFyXCIpO1xufVxuXG5mdW5jdGlvbiBidWlsZFByb2ZpbGVzKCk6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIGJ1aWxkQmF0Y2goKS5jb25jYXQoXCJwcm9maWxlc1wiKTtcbn1cblxuZnVuY3Rpb24gZ2V0T3JpZ2luKCk6IHN0cmluZyB7XG4gIHJldHVybiBcImh0dHBzOi8vXCIgKyBTS1lQRVdFQl9BUElfU0tZUEVfSE9TVDtcbn1cblxuZnVuY3Rpb24gZ2V0KHA6IHN0cmluZykge1xuICByZXR1cm4gdXJsLnJlc29sdmUoZ2V0T3JpZ2luKCksIHApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheU5hbWUodXNlcm5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBnZXQoam9pblBhdGgoYnVpbGREaXNwbGF5TmFtZSh1c2VybmFtZSkpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZXJQcm9maWxlKHVzZXI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBnZXQoam9pblBhdGgoYnVpbGRQcm9maWxlKHVzZXIpKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VyUHJvZmlsZXMoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGdldChqb2luUGF0aChidWlsZFByb2ZpbGVzKCkpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF1dGhSZXF1ZXN0QWNjZXB0KHVzZXJuYW1lOiBzdHJpbmcsIGNvbnRhY3Q6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBnZXQoam9pblBhdGgoYnVpbGRBdXRoUmVxdWVzdEFjY2VwdCh1c2VybmFtZSwgY29udGFjdCkpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF1dGhSZXF1ZXN0RGVjbGluZSh1c2VybmFtZTogc3RyaW5nLCBjb250YWN0OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gZ2V0KGpvaW5QYXRoKGJ1aWxkQXV0aFJlcXVlc3REZWNsaW5lKHVzZXJuYW1lLCBjb250YWN0KSkpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
