"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const incident_1 = require("incident");
const json_1 = require("../json");
const white_list_1 = require("../types/white-list");
function register(serializer) {
    function write(type, val) {
        return serializer.write(type.itemType, val);
    }
    function read(type, input) {
        const value = json_1.JSON_SERIALIZER.read(type.itemType, input);
        for (const allowed of type.values) {
            if (type.itemType.equals(value, allowed)) {
                return value;
            }
        }
        throw incident_1.Incident("UnkownVariant", "Unknown variant");
    }
    function readTrusted(type, input) {
        return serializer.readTrusted(type.itemType, input);
    }
    serializer.register({
        typeName: white_list_1.name,
        write,
        read,
        readTrusted,
    });
}
exports.register = register;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInFzL3doaXRlLWxpc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBb0M7QUFDcEMsa0NBQTBDO0FBRTFDLG9EQUFzRTtBQUV0RSxrQkFBeUIsVUFBc0I7SUFDN0MsZUFBa0IsSUFBc0IsRUFBRSxHQUFNO1FBQzlDLE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELGNBQWlCLElBQXNCLEVBQUUsS0FBVTtRQUNqRCxNQUFNLEtBQUssR0FBTSxzQkFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzVELEdBQUcsQ0FBQyxDQUFDLE1BQU0sT0FBTyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pDLE1BQU0sQ0FBQyxLQUFLLENBQUM7WUFDZixDQUFDO1FBQ0gsQ0FBQztRQUNELE1BQU0sbUJBQVEsQ0FBQyxlQUFlLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRUQscUJBQXdCLElBQXNCLEVBQUUsS0FBYTtRQUMzRCxNQUFNLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRCxVQUFVLENBQUMsUUFBUSxDQUFDO1FBQ2xCLFFBQVEsRUFBUixpQkFBUTtRQUNSLEtBQUs7UUFDTCxJQUFJO1FBQ0osV0FBVztLQUNaLENBQUMsQ0FBQztBQUNMLENBQUM7QUF6QkQsNEJBeUJDIiwiZmlsZSI6InFzL3doaXRlLWxpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmNpZGVudCB9IGZyb20gXCJpbmNpZGVudFwiO1xuaW1wb3J0IHsgSlNPTl9TRVJJQUxJWkVSIH0gZnJvbSBcIi4uL2pzb25cIjtcbmltcG9ydCB7IFNlcmlhbGl6ZXIgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IG5hbWUgYXMgdHlwZU5hbWUsIFdoaXRlTGlzdFR5cGUgfSBmcm9tIFwiLi4vdHlwZXMvd2hpdGUtbGlzdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIoc2VyaWFsaXplcjogU2VyaWFsaXplcik6IHZvaWQge1xuICBmdW5jdGlvbiB3cml0ZTxUPih0eXBlOiBXaGl0ZUxpc3RUeXBlPFQ+LCB2YWw6IFQpOiBhbnkge1xuICAgIHJldHVybiBzZXJpYWxpemVyLndyaXRlKHR5cGUuaXRlbVR5cGUsIHZhbCk7XG4gIH1cblxuICBmdW5jdGlvbiByZWFkPFQ+KHR5cGU6IFdoaXRlTGlzdFR5cGU8VD4sIGlucHV0OiBhbnkpOiBUIHtcbiAgICBjb25zdCB2YWx1ZTogVCA9IEpTT05fU0VSSUFMSVpFUi5yZWFkKHR5cGUuaXRlbVR5cGUsIGlucHV0KTtcbiAgICBmb3IgKGNvbnN0IGFsbG93ZWQgb2YgdHlwZS52YWx1ZXMpIHtcbiAgICAgIGlmICh0eXBlLml0ZW1UeXBlLmVxdWFscyh2YWx1ZSwgYWxsb3dlZCkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBJbmNpZGVudChcIlVua293blZhcmlhbnRcIiwgXCJVbmtub3duIHZhcmlhbnRcIik7XG4gIH1cblxuICBmdW5jdGlvbiByZWFkVHJ1c3RlZDxUPih0eXBlOiBXaGl0ZUxpc3RUeXBlPFQ+LCBpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gc2VyaWFsaXplci5yZWFkVHJ1c3RlZCh0eXBlLml0ZW1UeXBlLCBpbnB1dCk7XG4gIH1cblxuICBzZXJpYWxpemVyLnJlZ2lzdGVyKHtcbiAgICB0eXBlTmFtZSxcbiAgICB3cml0ZSxcbiAgICByZWFkLFxuICAgIHJlYWRUcnVzdGVkLFxuICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiLi4ifQ==
