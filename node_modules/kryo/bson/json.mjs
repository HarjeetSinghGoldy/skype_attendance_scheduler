import { Incident } from "incident";
import { name as typeName } from "../types/json";
function write(type, value) {
    return JSON.parse(JSON.stringify(value));
}
function read(type, input) {
    try {
        return JSON.parse(JSON.stringify(input));
    }
    catch (err) {
        throw new Incident(err, "InvalidJson");
    }
}
function readTrusted(type, input) {
    return JSON.parse(JSON.stringify(input));
}
export const SERIALIZER = {
    typeName,
    write,
    read,
    readTrusted,
};
export function register(serializer) {
    serializer.register(SERIALIZER);
}
