"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const incident_1 = require("incident");
const json_1 = require("../json");
const white_list_1 = require("../types/white-list");
function register(serializer) {
    function write(type, val) {
        return serializer.write(type.itemType, val);
    }
    function read(type, input) {
        const value = json_1.JSON_SERIALIZER.read(type.itemType, input);
        for (const allowed of type.values) {
            if (type.itemType.equals(value, allowed)) {
                return value;
            }
        }
        throw incident_1.Incident("UnkownVariant", "Unknown variant");
    }
    function readTrusted(type, input) {
        return serializer.readTrusted(type.itemType, input);
    }
    serializer.register({
        typeName: white_list_1.name,
        write,
        read,
        readTrusted,
    });
}
exports.register = register;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJzb24vd2hpdGUtbGlzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUFvQztBQUNwQyxrQ0FBMEM7QUFFMUMsb0RBQXNFO0FBRXRFLGtCQUF5QixVQUFzQjtJQUM3QyxlQUFrQixJQUFzQixFQUFFLEdBQU07UUFDOUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBRUQsY0FBaUIsSUFBc0IsRUFBRSxLQUFVO1FBQ2pELE1BQU0sS0FBSyxHQUFNLHNCQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDNUQsR0FBRyxDQUFDLENBQUMsTUFBTSxPQUFPLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbEMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekMsTUFBTSxDQUFDLEtBQUssQ0FBQztZQUNmLENBQUM7UUFDSCxDQUFDO1FBQ0QsTUFBTSxtQkFBUSxDQUFDLGVBQWUsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFRCxxQkFBd0IsSUFBc0IsRUFBRSxLQUFhO1FBQzNELE1BQU0sQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVELFVBQVUsQ0FBQyxRQUFRLENBQUM7UUFDbEIsUUFBUSxFQUFSLGlCQUFRO1FBQ1IsS0FBSztRQUNMLElBQUk7UUFDSixXQUFXO0tBQ1osQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQXpCRCw0QkF5QkMiLCJmaWxlIjoiYnNvbi93aGl0ZS1saXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5jaWRlbnQgfSBmcm9tIFwiaW5jaWRlbnRcIjtcbmltcG9ydCB7IEpTT05fU0VSSUFMSVpFUiB9IGZyb20gXCIuLi9qc29uXCI7XG5pbXBvcnQgeyBTZXJpYWxpemVyIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBuYW1lIGFzIHR5cGVOYW1lLCBXaGl0ZUxpc3RUeXBlIH0gZnJvbSBcIi4uL3R5cGVzL3doaXRlLWxpc3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyKHNlcmlhbGl6ZXI6IFNlcmlhbGl6ZXIpOiB2b2lkIHtcbiAgZnVuY3Rpb24gd3JpdGU8VD4odHlwZTogV2hpdGVMaXN0VHlwZTxUPiwgdmFsOiBUKTogYW55IHtcbiAgICByZXR1cm4gc2VyaWFsaXplci53cml0ZSh0eXBlLml0ZW1UeXBlLCB2YWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZDxUPih0eXBlOiBXaGl0ZUxpc3RUeXBlPFQ+LCBpbnB1dDogYW55KTogVCB7XG4gICAgY29uc3QgdmFsdWU6IFQgPSBKU09OX1NFUklBTElaRVIucmVhZCh0eXBlLml0ZW1UeXBlLCBpbnB1dCk7XG4gICAgZm9yIChjb25zdCBhbGxvd2VkIG9mIHR5cGUudmFsdWVzKSB7XG4gICAgICBpZiAodHlwZS5pdGVtVHlwZS5lcXVhbHModmFsdWUsIGFsbG93ZWQpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgSW5jaWRlbnQoXCJVbmtvd25WYXJpYW50XCIsIFwiVW5rbm93biB2YXJpYW50XCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZFRydXN0ZWQ8VD4odHlwZTogV2hpdGVMaXN0VHlwZTxUPiwgaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZXIucmVhZFRydXN0ZWQodHlwZS5pdGVtVHlwZSwgaW5wdXQpO1xuICB9XG5cbiAgc2VyaWFsaXplci5yZWdpc3Rlcih7XG4gICAgdHlwZU5hbWUsXG4gICAgd3JpdGUsXG4gICAgcmVhZCxcbiAgICByZWFkVHJ1c3RlZCxcbiAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6Ii4uIn0=
