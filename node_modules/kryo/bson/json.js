"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const incident_1 = require("incident");
const json_1 = require("../types/json");
function write(type, value) {
    return JSON.parse(JSON.stringify(value));
}
function read(type, input) {
    try {
        return JSON.parse(JSON.stringify(input));
    }
    catch (err) {
        throw new incident_1.Incident(err, "InvalidJson");
    }
}
function readTrusted(type, input) {
    return JSON.parse(JSON.stringify(input));
}
exports.SERIALIZER = {
    typeName: json_1.name,
    write,
    read,
    readTrusted,
};
function register(serializer) {
    serializer.register(exports.SERIALIZER);
}
exports.register = register;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJzb24vanNvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUFvQztBQUVwQyx3Q0FBMkQ7QUFFM0QsZUFBZSxJQUFjLEVBQUUsS0FBVTtJQUN2QyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDM0MsQ0FBQztBQUVELGNBQWMsSUFBYyxFQUFFLEtBQVU7SUFDdEMsSUFBSSxDQUFDO1FBQ0gsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2IsTUFBTSxJQUFJLG1CQUFRLENBQUMsR0FBRyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7QUFDSCxDQUFDO0FBRUQscUJBQXFCLElBQWMsRUFBRSxLQUFVO0lBQzdDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUMzQyxDQUFDO0FBRVksUUFBQSxVQUFVLEdBQXdCO0lBQzdDLFFBQVEsRUFBUixXQUFRO0lBQ1IsS0FBSztJQUNMLElBQUk7SUFDSixXQUFXO0NBQ1osQ0FBQztBQUVGLGtCQUF5QixVQUFzQjtJQUM3QyxVQUFVLENBQUMsUUFBUSxDQUFDLGtCQUFVLENBQUMsQ0FBQztBQUNsQyxDQUFDO0FBRkQsNEJBRUMiLCJmaWxlIjoiYnNvbi9qc29uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5jaWRlbnQgfSBmcm9tIFwiaW5jaWRlbnRcIjtcbmltcG9ydCB7IFNlcmlhbGl6ZXIsIFR5cGVTZXJpYWxpemVyIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBKc29uVHlwZSwgbmFtZSBhcyB0eXBlTmFtZSB9IGZyb20gXCIuLi90eXBlcy9qc29uXCI7XG5cbmZ1bmN0aW9uIHdyaXRlKHR5cGU6IEpzb25UeXBlLCB2YWx1ZTogYW55KTogYW55IHtcbiAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbn1cblxuZnVuY3Rpb24gcmVhZCh0eXBlOiBKc29uVHlwZSwgaW5wdXQ6IGFueSk6IGFueSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaW5wdXQpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEluY2lkZW50KGVyciwgXCJJbnZhbGlkSnNvblwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWFkVHJ1c3RlZCh0eXBlOiBKc29uVHlwZSwgaW5wdXQ6IGFueSk6IGFueSB7XG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGlucHV0KSk7XG59XG5cbmV4cG9ydCBjb25zdCBTRVJJQUxJWkVSOiBUeXBlU2VyaWFsaXplcjxhbnk+ID0ge1xuICB0eXBlTmFtZSxcbiAgd3JpdGUsXG4gIHJlYWQsXG4gIHJlYWRUcnVzdGVkLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyKHNlcmlhbGl6ZXI6IFNlcmlhbGl6ZXIpOiB2b2lkIHtcbiAgc2VyaWFsaXplci5yZWdpc3RlcihTRVJJQUxJWkVSKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiLi4ifQ==
